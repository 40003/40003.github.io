<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.4.2',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="MyBaits">
<meta property="og:type" content="article">
<meta property="og:title" content="MyBatis回顾">
<meta property="og:url" content="https:&#x2F;&#x2F;40003.github.io&#x2F;2019&#x2F;02&#x2F;20&#x2F;MyBatis%E5%9B%9E%E9%A1%BE&#x2F;index.html">
<meta property="og:site_name" content="XD">
<meta property="og:description" content="MyBaits">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https:&#x2F;&#x2F;40003.github.io&#x2F;img&#x2F;MyBatis%E5%9B%9E%E9%A1%BE&#x2F;params_dual.jpg">
<meta property="og:image" content="https:&#x2F;&#x2F;40003.github.io&#x2F;img&#x2F;MyBatis%E5%9B%9E%E9%A1%BE&#x2F;cache.jpg">
<meta property="og:updated_time" content="2019-07-29T04:38:44.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https:&#x2F;&#x2F;40003.github.io&#x2F;img&#x2F;MyBatis%E5%9B%9E%E9%A1%BE&#x2F;params_dual.jpg">

<link rel="canonical" href="https://40003.github.io/2019/02/20/MyBatis%E5%9B%9E%E9%A1%BE/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>MyBatis回顾 | XD</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">XD</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://40003.github.io/2019/02/20/MyBatis%E5%9B%9E%E9%A1%BE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="4003">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XD">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          MyBatis回顾
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-02-20 18:19:44" itemprop="dateCreated datePublished" datetime="2019-02-20T18:19:44+08:00">2019-02-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-07-29 12:38:44" itemprop="dateModified" datetime="2019-07-29T12:38:44+08:00">2019-07-29</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <blockquote>
<p>MyBaits</p>
</blockquote>
<a id="more"></a>

<h3 id="MyBatis—-半自动化-轻量的持久层框架"><a href="#MyBatis—-半自动化-轻量的持久层框架" class="headerlink" title="MyBatis—(半自动化  轻量的持久层框架)"></a>MyBatis—(半自动化  轻量的持久层框架)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建一个简单的mybatis</span></span><br><span class="line"><span class="keyword">package</span> com.xxx.Run;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xxx.domain.Student;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainTun</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//取得配置文件路径</span></span><br><span class="line">        String resource = <span class="string">"mybatis-config.xml"</span>;</span><br><span class="line">        <span class="comment">//加载配置文件</span></span><br><span class="line">        InputStream resourceAsStream = Resources.getResourceAsStream(resource);</span><br><span class="line">        <span class="comment">//通过配置文件获得SqlSessionFactory工厂</span></span><br><span class="line">        SqlSessionFactory sqlSessionFactoryBuilder = <span class="keyword">new</span> 				                 SqlSessionFactoryBuilder().build(resourceAsStream);</span><br><span class="line">        <span class="comment">//通过SqlSession获得session对象(session对象就是有与数据库交互的对象)</span></span><br><span class="line">        SqlSession sqlSession = sqlSessionFactoryBuilder.openSession();</span><br><span class="line">        <span class="comment">//第一个参数是namespace+sql的id</span></span><br><span class="line">        Student student = sqlSession.selectOne(<span class="string">"student.selectById"</span>, <span class="number">1</span>);</span><br><span class="line">        System.out.println(student);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--需要对mybatis进行配置--&gt;</span></span><br><span class="line"><span class="comment">&lt;!---------------主配置文件------------------------&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE configuration</span></span><br><span class="line"><span class="meta"> PUBLIC "-//mybatis.org//DTD Config 3.0//EN"</span></span><br><span class="line"><span class="meta"> "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">		properties标签:可以使用这个标签来引引入外部properties配置文件</span></span><br><span class="line"><span class="comment">		resources:引入类路径下的文件</span></span><br><span class="line"><span class="comment">		url:网络文件或者磁盘文件</span></span><br><span class="line"><span class="comment">	--&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">"db.properties"</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">		settings包含了好多设置项</span></span><br><span class="line"><span class="comment">		setting用来设置每一个设置项</span></span><br><span class="line"><span class="comment">	--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">			数据库查出来的数据进行驼峰命名 和 javabean 对象对应</span></span><br><span class="line"><span class="comment">			如果不用的 也可以用自定义resultMap 或者 执行sql语句的时候起别名</span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"mapUnderscoreToCamelCase"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!--mybatis里面的别名处理器 resultType后面要写全限定类名 别名处理器可以给类设置别名 更加方便--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">"com.xxx.domain.Student"</span> <span class="attr">alias</span>=<span class="string">"Student"</span> /&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">		批量起别名 包别名 不是类别名</span></span><br><span class="line"><span class="comment">		如果domain下面有子包 里面也有相同的类 可以在类上使用注解@Alias("xxx")进行区分</span></span><br><span class="line"><span class="comment">		@Alias 是基于&lt;package&gt;存在的</span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--&lt;package name="com.xxx.domain" /&gt;--&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!--建设java类与数据库表的桥梁--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">typeHandlers</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;/<span class="name">typeHandlers</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!--plugins--&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!--环境 mybatis支持配置多个环境 default指定使用某种环境 可以达到快速切换环境--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--具体的环境信息--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">			事务管理器</span></span><br><span class="line"><span class="comment">			--&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span> /&gt;</span></span><br><span class="line">			<span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">			type:pooled(连接池) unpooled(不使用连接池) jndi</span></span><br><span class="line"><span class="comment">			--&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">				<span class="comment">&lt;!--配置数据库地址--&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">		MyBaits支持多数据库</span></span><br><span class="line"><span class="comment">		databaseIdProvider:就是得到厂商数据库的表示 确定是用那个数据库执行不同的SQL</span></span><br><span class="line"><span class="comment">						   配置不同数据库时 需要在sql标签中加 databaseId="xxx"</span></span><br><span class="line"><span class="comment">	--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">databaseIdProvider</span> <span class="attr">type</span>=<span class="string">"DB_VENDOR"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"MySQL"</span> <span class="attr">value</span>=<span class="string">"mysql"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"Oracle"</span> <span class="attr">value</span>=<span class="string">"oracle"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">databaseIdProvider</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!--将我们自己手动写的mapper加载到主配置文件中 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mappers</span> &gt;</span></span><br><span class="line">		<span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">			resources:引用类路径下的sql映射文件</span></span><br><span class="line"><span class="comment">			url:网络路径 或者磁盘路径</span></span><br><span class="line"><span class="comment">			class:直接使用接口的全限定类名</span></span><br><span class="line"><span class="comment">			      如果使用class方式</span></span><br><span class="line"><span class="comment">			      1.如果有sql映射文件 映射文件必须和接口同名 并且放在同一个目录下</span></span><br><span class="line"><span class="comment">			      2.没有sql映射文件 所有的sql都是使用注解卸载接口方法上的 class:xxx.xxx.xxxMapper</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"StudentCopyMapper.xml"</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        package:如果使用package  映射文件必须和接口同名 并且放在同一个目录下</span></span><br><span class="line"><span class="comment">        e--&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!---------------主配置文件------------------------&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!---------------mapper配置文件------------------------&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE mapper</span></span><br><span class="line"><span class="meta">        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"</span></span><br><span class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--namespace:配置文件唯一标识 可以通过namespace区分使用哪个mapper配置文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"student"</span> <span class="attr">type</span>=<span class="string">"com.xxx.domain.Student"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">jdbcType</span>=<span class="string">"INTEGER"</span> <span class="attr">property</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"sname"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> <span class="attr">property</span>=<span class="string">"sname"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"phone_number"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> <span class="attr">property</span>=<span class="string">"phoneNumber"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"address"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> <span class="attr">property</span>=<span class="string">"address"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectById"</span> <span class="attr">resultMap</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">        SELECT * FROM `student` WHERE id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!---------------mapper配置文件------------------------&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//mybatis面向接口编程</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">      <span class="comment">//面向接口编程</span></span><br><span class="line">        SqlSession session = MainTun.getSession();</span><br><span class="line">        StudentMapper studentMapper = session.getMapper(StudentMapper.class);</span><br><span class="line">        Student studentById = studentMapper.getStudentById(<span class="number">1</span>);</span><br><span class="line">        System.out.println(studentById);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--面向接口编程需要注意的地方--&gt;</span></span><br><span class="line">StudentMapper studentMapper = session.getMapper(StudentMapper.class); </span><br><span class="line"><span class="comment">&lt;!--上面的意思是:由mybatis自动给*Mapper接口创建一个代理对象 由代理对象和数据库进行交互--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE mapper</span></span><br><span class="line"><span class="meta">        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"</span></span><br><span class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></span><br><span class="line"><span class="comment">&lt;!--如果面向接口编程 namespace要设置为接口的全限定类名--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--sql语句的id要设置为接口的方法名字--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--可以抽象的理解为*mapper.xml是*mapper接口的实现类--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--namespace:配置文件唯一标识 可以通过namespace区分使用哪个mapper配置文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.xxx.mapper.StudentMapper"</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">   <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"student1"</span> <span class="attr">type</span>=<span class="string">"com.xxx.domain.Student"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">jdbcType</span>=<span class="string">"INTEGER"</span> <span class="attr">property</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"sname"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> <span class="attr">property</span>=<span class="string">"sname"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"phone_number"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> <span class="attr">property</span>=<span class="string">"phoneNumber"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"address"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> <span class="attr">property</span>=<span class="string">"address"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">databaseId</span>=<span class="string">"mysql"</span> <span class="attr">id</span>=<span class="string">"getStudentById"</span> <span class="attr">resultType</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">        SELECT * FROM `student` WHERE id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--如果在dao层给主键id赋值为null 数据库插入操作完成之后 还是会返回插入的id(需要配置 useGeneratedKeys="true" keyProperty="id") --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        useGeneratedKeys:使用主键自增策略</span></span><br><span class="line"><span class="comment">        keyProperty:获取到的主键值赋值给javabean的id属性</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertStudent"</span> <span class="attr">useGeneratedKeys</span>=<span class="string">"true"</span> <span class="attr">keyProperty</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">        INSERT INTO `student`(sname, phone_number, address) VALUES (#&#123;sname&#125;,#&#123;phoneNumber&#125;,#&#123;address&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        如果传入多个参数(不是对象)的时候 不能用#&#123;参数name获取&#125;</span></span><br><span class="line"><span class="comment">        mybatis处理多个参数的时候 会把参数集封装成一个map集合</span></span><br><span class="line"><span class="comment">        key:param1...paramn</span></span><br><span class="line"><span class="comment">        value:是传过来参数</span></span><br><span class="line"><span class="comment">       #&#123;&#125;取值是取得key的值</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectParams"</span> <span class="attr">resultType</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">        SELECT * FROM student WHERE id = #&#123;param1&#125; AND sname = #&#123;param2&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        传过来的参数是map集合 根据key取值</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectParamByMap"</span> <span class="attr">resultType</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">        SELECT * FROM student WHERE id = #&#123;id&#125; AND sname = #&#123;sname&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        返回list集合</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectStudentBySname"</span> <span class="attr">resultType</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">        SELECT * FROM student WHERE sname = #&#123;value&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        返回Map集合 使用@MapKey("id")可以指定返回map的key值 不指定默认:column是key javaType是value</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectStudentByMap"</span> <span class="attr">resultType</span>=<span class="string">"map"</span>&gt;</span></span><br><span class="line">        SELECT * FROM student WHERE id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        如果使用map集合返回多条数据时</span></span><br><span class="line"><span class="comment">        要在对应的接口方法</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        @MapKey("id")</span></span><br><span class="line"><span class="comment">        Map&lt;Object,Object&gt; selectStudentByMap</span></span><br><span class="line"><span class="comment">        加上 @MapKey("id") 标明返回map集合里面某一条数据的key值 否则会只封装一条数据 但是查询出多条数据 程序报错</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectStudentByMaps"</span> <span class="attr">resultType</span>=<span class="string">"map"</span>&gt;</span></span><br><span class="line">        SELECT * FROM student WHERE sname LIKE "%"#&#123;sname&#125;"%"</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="MyBatis为什么要面向接口编程"><a href="#MyBatis为什么要面向接口编程" class="headerlink" title="MyBatis为什么要面向接口编程"></a>MyBatis为什么要面向接口编程</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.拥有更强的类型检查(参数是什么类型必须传什么类型)</span><br><span class="line">2.有明确的返回值(返回值类型已经被接口规定)</span><br><span class="line">3.方便开发者 开发 扩展和维护</span><br></pre></td></tr></table></figure>

<h3 id="MyBatis传入的参数处理"><a href="#MyBatis传入的参数处理" class="headerlink" title="MyBatis传入的参数处理"></a>MyBatis传入的参数处理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">1.传入单个参数</span><br><span class="line">	#&#123;参数名&#125;:取出参数值(如果只有一个参数的话 参数名写什么都可以)</span><br><span class="line">2.多个参数</span><br><span class="line">	 如果传入多个参数(不是对象)的时候 不能用#&#123;参数name获取&#125;</span><br><span class="line">        mybatis处理多个参数的时候 会把参数集封装成一个map集合</span><br><span class="line">        key:param1...paramn</span><br><span class="line">        value:是传过来参数</span><br><span class="line">       #&#123;&#125;取值是取得key的值</span><br><span class="line">3.命名参数</span><br><span class="line">	传入多个参数的第二种取值方法</span><br><span class="line">	就是在需要传过来的参数前面加@Param(&quot;xxx&quot;) </span><br><span class="line">	xxx设置为需要传过去的参数name</span><br><span class="line">	取值的时候使用#&#123;xxx(传过来的参数name)&#125;进行取值</span><br><span class="line">4.pojo</span><br><span class="line">	如果参数符合业务的模型数据 建议封装成pojo</span><br><span class="line">	取值的时候 #&#123;pojo的属性名字取值&#125;</span><br><span class="line">5.Map</span><br><span class="line">	如果参数不符合业务逻辑 建议传一个map</span><br><span class="line">	取值的时候使用#&#123;map的key&#125;</span><br><span class="line">6.如果数据经常被使用的话(不符合业务模型) 建议封装成一个TO(TransferObject) 例如做分页的时候</span><br></pre></td></tr></table></figure>

<h3 id="获取参数细节"><a href="#获取参数细节" class="headerlink" title="获取参数细节"></a>获取参数细节</h3><p><img src="/img/MyBatis%E5%9B%9E%E9%A1%BE/params_dual.jpg" alt=""></p>
<h3 id="xxx-与-xxx-的区别"><a href="#xxx-与-xxx-的区别" class="headerlink" title="#{xxx}与${xxx}的区别"></a>#{xxx}与${xxx}的区别</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#&#123;xxx&#125;:是以预编译的形式(使用占位符 用?代替) 将参数设置到sql语句中:PrepareStatement:防止SQL注入</span><br><span class="line">$&#123;xxx&#125;:取出的值直接拼装到SQL中 没发防止SQL注入 会有安全问题</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">原生JDBC不支持占位符的地方</span><br><span class="line">SELECT * FROM $&#123;XXX&#125;:这里就不能使用#&#123;xxx&#125; order by $&#123;xxx&#125;</span><br></pre></td></tr></table></figure>



<h3 id="MyBatis在做模糊查询的时候SQL语句"><a href="#MyBatis在做模糊查询的时候SQL语句" class="headerlink" title="MyBatis在做模糊查询的时候SQL语句"></a>MyBatis在做模糊查询的时候SQL语句</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> <span class="keyword">name</span> <span class="keyword">LIKE</span> <span class="string">"%"</span><span class="comment">#&#123;value&#125;"%"</span></span><br><span class="line">要用双引号!!!!!</span><br><span class="line"><span class="keyword">concat</span>(<span class="string">'%'</span>,<span class="comment">#&#123;aaa&#125;,'%')</span></span><br><span class="line">要用单引号!!!!!</span><br></pre></td></tr></table></figure>

<h3 id="resultMap-自定义返回结果类型"><a href="#resultMap-自定义返回结果类型" class="headerlink" title="resultMap 自定义返回结果类型"></a>resultMap 自定义返回结果类型</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!----------------------------------------------------------------------------&gt;</span>    </span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">           resultMap: id 自定义结果类型的name</span></span><br><span class="line"><span class="comment">                      type 查询结果对应的javabean对象</span></span><br><span class="line"><span class="comment">                      id: javabean的id数据库的唯一字段</span></span><br><span class="line"><span class="comment">                      result:javabean的全限定类名</span></span><br><span class="line"><span class="comment">                      column:数据库的字段</span></span><br><span class="line"><span class="comment">                      property:对应的javabean属性</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"studentByResultMap"</span> <span class="attr">type</span>=<span class="string">"com.xxx.domain.Student"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"sname"</span> <span class="attr">property</span>=<span class="string">"sname"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"phone_number"</span> <span class="attr">property</span>=<span class="string">"phoneNumber"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"address"</span> <span class="attr">property</span>=<span class="string">"address"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    resultMap自定义返回结果类型</span></span><br><span class="line"><span class="comment">    resultMap:自定义的结果类型id</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectStudentByResultMap"</span> <span class="attr">resultMap</span>=<span class="string">"studentByResultMap"</span>&gt;</span></span><br><span class="line">        SELECT * FROM student WHERE id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!----------------------------------------------------------------------------&gt;</span></span><br><span class="line"><span class="comment">&lt;!--级联查询--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	  resultMap里面的column值要根据sql标签里面查询出来的字段进行赋值</span></span><br><span class="line"><span class="comment">      resultMap: 联合查询:级联属性封装结果集</span></span><br><span class="line"><span class="comment">                Student(id,phoneNumber,address,School school)</span></span><br><span class="line"><span class="comment">                查询出student给school赋值的话 可以使用 school.+(school的属性名字)</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"diffStudent"</span> <span class="attr">type</span>=<span class="string">"com.xxx.domain.Student"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"phone_number"</span> <span class="attr">property</span>=<span class="string">"phoneNumber"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"address"</span> <span class="attr">property</span>=<span class="string">"address"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"school_id"</span> <span class="attr">property</span>=<span class="string">"school.id"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"s_s_name"</span> <span class="attr">property</span>=<span class="string">"school.s_name"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        自定义resultMap的column可以是用别名的字段</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectStudentAndSchoolName"</span> <span class="attr">resultMap</span>=<span class="string">"diffStudent"</span>&gt;</span></span><br><span class="line">        SELECT student.id AS id,student.phone_number AS phone_number,student.address AS address,student.school AS school_id,school.s_name AS s_s_name</span><br><span class="line">        FROM student student</span><br><span class="line">        JOIN school school</span><br><span class="line">        ON student.school = school.id</span><br><span class="line">        WHERE studen</span><br><span class="line">        t.id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!----------------------------------------------------------------------------&gt;</span></span><br><span class="line"><span class="comment">&lt;!--联合查询--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        association:可以指定包含在student里面的school属性属于哪个对象 (联合查询)</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"associationStudent"</span> <span class="attr">type</span>=<span class="string">"com.xxx.domain.Student"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"sid"</span> <span class="attr">property</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"s_sname"</span> <span class="attr">property</span>=<span class="string">"sname"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"s_phoneNumber"</span> <span class="attr">property</span>=<span class="string">"phoneNumber"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            property:需要在当前类中关联哪个对象 就写哪个对象的引用名</span></span><br><span class="line"><span class="comment">            javaType:关联对象的全限定类型(不能省略)</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"school"</span> <span class="attr">javaType</span>=<span class="string">"com.xxx.domain.School"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"school_id"</span> <span class="attr">property</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"school_name"</span> <span class="attr">property</span>=<span class="string">"s_name"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        resultMap里面的column值要根据sql标签里面查询出来的字段进行赋值</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectStudentByAssociation"</span> <span class="attr">resultMap</span>=<span class="string">"associationStudent"</span>&gt;</span></span><br><span class="line">        SELECT student.id AS sid,student.sname AS s_sname,student.phone_number AS s_phoneNumber,student.school AS school_id,school.s_name AS school_name</span><br><span class="line">        FROM student student</span><br><span class="line">        JOIN school school</span><br><span class="line">        ON student.school = school.id</span><br><span class="line">        WHERE student.id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="resultMap分步查询"><a href="#resultMap分步查询" class="headerlink" title="resultMap分步查询"></a>resultMap分步查询</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        association分步查询: 需求:查出1号学生对应的学校名字</span></span><br><span class="line"><span class="comment">                            先查出id对应的学生</span></span><br><span class="line"><span class="comment">                            然后查到学生的学校id 通过分步查询 根据id查询到学校name</span></span><br><span class="line"><span class="comment">		 association 也同样支持延迟加载 需要在主配置文件settings中设置</span></span><br><span class="line"><span class="comment">                        配置association延迟加载:</span></span><br><span class="line"><span class="comment">                        只要每次查询student数据的时候school也会一起加载出来</span></span><br><span class="line"><span class="comment">                        配置延迟加载 当不使用school数据的时候 就不会加载school 提升效率</span></span><br><span class="line"><span class="comment">                        &lt;setting name="lazyLoadingEnabled" value="true"/&gt;</span></span><br><span class="line"><span class="comment">                        &lt;setting name="aggressiveLazyLoading" value="false"/&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"findStudentAndSchoolNameByStep"</span> <span class="attr">type</span>=<span class="string">"com.xxx.domain.Student"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"sname"</span> <span class="attr">property</span>=<span class="string">"sname"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"phoneNumber"</span> <span class="attr">property</span>=<span class="string">"phoneNumber"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            property:对象里面的引用对象属性名字 javaType:引用对象的全限定类名</span></span><br><span class="line"><span class="comment">            select:指定的是要使用目标*mapper.xml的namespace+&lt;select id=?&gt;</span></span><br><span class="line"><span class="comment">            column:下方select查询出来的字段名称 同时也是 目标mapper &lt;select id=?&gt;的需要传入的值</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"school"</span> <span class="attr">javaType</span>=<span class="string">"com.xxx.domain.School"</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">select</span>=<span class="string">"com.xxx.mapper.SchoolMapper.getStudentById"</span> <span class="attr">column</span>=<span class="string">"student_id"</span>&gt;</span><span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectStudentByStep"</span> <span class="attr">resultMap</span>=<span class="string">"findStudentAndSchoolNameByStep"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            先查出id对应的学生</span></span><br><span class="line"><span class="comment">            然后查到学生的学校id 通过分步查询 根据id查询到学校name</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        SELECT student.id AS id,student.sname AS sname,student.phone_number AS 			    phoneNumber,student.school AS student_id</span><br><span class="line">        FROM student student WHERE student.id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!------------------------------------------------------&gt;</span></span><br><span class="line"><span class="comment">&lt;!--目标mapper--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.xxx.mapper.SchoolMapper"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getStudentById"</span> <span class="attr">resultType</span>=<span class="string">"com.xxx.domain.School"</span>&gt;</span></span><br><span class="line">        SELECT id,s_name AS sName FROM school WHERE id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="Collection查询关联查询和分步查询"><a href="#Collection查询关联查询和分步查询" class="headerlink" title="Collection查询关联查询和分步查询"></a>Collection查询关联查询和分步查询</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">       collection:如果需要查询的属性是一个集合使用collection进行操作</span></span><br><span class="line"><span class="comment">                  property:属性的name</span></span><br><span class="line"><span class="comment">                  ofType:property_name的全限定类名</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"schoolInfo"</span> <span class="attr">type</span>=<span class="string">"com.xxx.domain.School"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"sname"</span> <span class="attr">property</span>=<span class="string">"sName"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"students"</span> <span class="attr">ofType</span>=<span class="string">"com.xxx.domain.Student"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"student_id"</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"sname"</span> <span class="attr">property</span>=<span class="string">"sname"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectSchoolCollectionByStudentId"</span> <span class="attr">resultMap</span>=<span class="string">"schoolInfo"</span>&gt;</span></span><br><span class="line">       SELECT school.id,school.s_name AS sname,student.id AS student_id,student.sname AS sname</span><br><span class="line">       FROM school school</span><br><span class="line">       LEFT JOIN student student</span><br><span class="line">       ON school.id = student.school</span><br><span class="line">       WHERE school.id = #&#123;id&#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">       collection分步加载(同样也支持延迟加载)</span></span><br><span class="line"><span class="comment">           使用同resultMap分步加载</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"schoolLazyInfo"</span> <span class="attr">type</span>=<span class="string">"com.xxx.domain.School"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"sname"</span> <span class="attr">property</span>=<span class="string">"sName"</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"students"</span> <span class="attr">ofType</span>=<span class="string">"com.xxx.domain.Student"</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">select</span>=<span class="string">"com.xxx.mapper.StudentMapper.getStudentByIdList"</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">column</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">       collection分步查询 需要查询当前school.id</span></span><br><span class="line"><span class="comment">                         然后把id传给studentMapper根据id 查询有多少人</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectCollectionStudentByLazyLoading"</span> <span class="attr">resultMap</span>=<span class="string">"schoolLazyInfo"</span>&gt;</span></span><br><span class="line">       SELECT school.id AS id,school.s_name AS sname</span><br><span class="line">       FROM school WHERE id = #&#123;id&#125;;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="resultMap-collection-分步查询-延迟加载-需要传多个值怎么办"><a href="#resultMap-collection-分步查询-延迟加载-需要传多个值怎么办" class="headerlink" title="resultMap   collection 分步查询(延迟加载)需要传多个值怎么办?"></a>resultMap   collection 分步查询(延迟加载)需要传多个值怎么办?</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span>&gt;</span> </span><br><span class="line">	select * from student where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">需要传多个值的时候 吧column设置为map</span></span><br><span class="line"><span class="comment">格式: column = "&#123;上面的SQL#&#123;xxx&#125;里面的值 = 需要传过去的字段值(是select语句查询出来的值 不是javabean中的																			属性name)&#125;";</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"schoolLazyInfo"</span> <span class="attr">type</span>=<span class="string">"com.xxx.domain.School"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"sname"</span> <span class="attr">property</span>=<span class="string">"sName"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"students"</span> <span class="attr">ofType</span>=<span class="string">"com.xxx.domain.Student"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">select</span>=<span class="string">"com.xxx.mapper.StudentMapper.getStudentByIdList"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">column</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="如果在全局配置文件中开启了延迟加载-某条SQL需要立即加载怎么办"><a href="#如果在全局配置文件中开启了延迟加载-某条SQL需要立即加载怎么办" class="headerlink" title="如果在全局配置文件中开启了延迟加载  某条SQL需要立即加载怎么办"></a>如果在全局配置文件中开启了延迟加载  某条SQL需要立即加载怎么办</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	resultMap和collection标签中有一个属性 fetchType: lazy||eager 延迟加载||立即加载</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"students"</span> <span class="attr">ofType</span>=<span class="string">"com.xxx.domain.Student"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">select</span>=<span class="string">"com.xxx.mapper.StudentMapper.getStudentByIdList"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">fetchType</span>=<span class="string">"lazy"</span>&gt;</span><span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="MyBatis动态SQL"><a href="#MyBatis动态SQL" class="headerlink" title="MyBatis动态SQL"></a>MyBatis动态SQL</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM school</span><br><span class="line">     <span class="tag">&lt;<span class="name">where</span>&gt;</span> <span class="comment">&lt;!-- where后面会自动带上1=1 --&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">             <span class="comment">&lt;!--多个if会进行判断 每个if都会走--&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">               <span class="comment">&lt;!-- when标签如果有一个when成立 其他的when就不判断了 --&gt;</span></span><br><span class="line">             <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">             <span class="comment">&lt;!--书写ipdate语句的时候可能会一个 ,  set标签可以帮我们去除,--&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">""</span> <span class="attr">item</span>=<span class="string">""</span> <span class="attr">separator</span>=<span class="string">""</span> <span class="attr">open</span>=<span class="string">""</span> <span class="attr">close</span>=<span class="string">""</span> <span class="attr">index</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">             <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">               collection:要遍历的集合</span></span><br><span class="line"><span class="comment">               item:集合里面的当前索引值</span></span><br><span class="line"><span class="comment">               separator:分隔符 以什么分割 example: where id in(1,2,3) separator=","</span></span><br><span class="line"><span class="comment">               open:以什么开头 example: where id in(1,2,3) open="("</span></span><br><span class="line"><span class="comment">               close:以什么结尾 example: where id in(1,2,3) end=")"</span></span><br><span class="line"><span class="comment">             --&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="MyBatis的缓存机制"><a href="#MyBatis的缓存机制" class="headerlink" title="MyBatis的缓存机制"></a>MyBatis的缓存机制</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">MyBatis中存在两级缓存</span><br><span class="line"></span><br><span class="line">	一级缓存:(本地缓存)(SqlSession级别的缓存 一级缓存是一直开启的)</span><br><span class="line">		(会把当前SqlSession查出的数据放到一个map中 下次查询会检查map)</span><br><span class="line">		与数据库同一次会话期间查询到的数据会放在本地缓存中</span><br><span class="line">		以后如果需要获取相同的数据 直接在缓存中拿数据 不需要查询数据库</span><br><span class="line">		(</span><br><span class="line">			一级缓存失效的情况:(没事使用当前一级缓存的情况 就是需要向数据库发出查询)</span><br><span class="line">						1.SqlSession不同</span><br><span class="line">						2.SqlSession相同 查询条件不同 </span><br><span class="line">						3.SqlSession相同 两次查询之间执行了增删改操作(这次增删改可能对当前数据有影响)</span><br><span class="line">						4.SqlSession相同 手动清空了缓存数据(openSession.clearCache())</span><br><span class="line">		)</span><br><span class="line">		</span><br><span class="line">	二级缓存:(全局缓存)(基于namespace级别的缓存 一个namespace对应一个二级缓存)</span><br><span class="line">		工作机制:</span><br><span class="line">			1.查询一条数据 这个数据会被保存到当前会话的一级缓存中</span><br><span class="line">			2.当前会话关闭 一级缓存的数据会被保存到二级缓存中 新的SqlSession开启</span><br><span class="line">			  就可以参照二级缓存中的数据</span><br><span class="line">			3.SqlSession==xxxMapper查询xxx</span><br><span class="line">			            ==nnnMapper查询nnn</span><br><span class="line">			            这两个对象会放在不同的map中(二级缓存也是把数据存到map中)</span><br><span class="line">			            xxx查询到的数据会被缓存到xxxMapper中 标识为namespace</span><br><span class="line">			            不同的namespace查出的数据会被放在自己对应的缓存中(map)</span><br><span class="line">			        注意:查出的数据会被默认放到一级缓冲中 只有会话提交或者关闭之后</span><br><span class="line">			        	一级缓冲中的数据才会被转移到二级缓存中</span><br><span class="line">			            </span><br><span class="line">		使用步骤:</span><br><span class="line">			1.二级缓存开启在主配置文件 &lt;settings&gt;中配置</span><br><span class="line">				&lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;&gt;</span><br><span class="line">				如果设置为false的话 关闭的是二级缓存 一级缓存一直打开</span><br><span class="line">			2.去xxxMapper.xml中配置使用二级缓存</span><br><span class="line">				在&lt;mapper&gt;标签下加&lt;cache&gt;&lt;/cache&gt;</span><br><span class="line">				&lt;cache&gt;标签中的几个配置</span><br><span class="line">					eviction:缓存的回收策略</span><br><span class="line">							LRU:最近最少使用,移除最长时间不被使用的对象</span><br><span class="line">							FIFO:先进先出 按对象进入缓存的顺序来移除他们</span><br><span class="line">							SOFT:软引用 移除基于垃圾回收器状态和软引用规则的对象</span><br><span class="line">							WEAK:弱引用 更积极 移除基于垃圾回收器状态和软引用规则的对象</span><br><span class="line">							默认是LRU</span><br><span class="line">					flushInterval:缓存刷新间隔</span><br><span class="line">								 缓存多长时间清空一次 默认不清空 可以设置一个毫秒值</span><br><span class="line">					readOnly:只读(不安全 速度快)</span><br><span class="line">								mybatis认为所有查询数据的操作都是只读的 不会修改数据</span><br><span class="line">								mybatis为了加快获取速度 直接把数据中的缓存的引用交给用户</span><br><span class="line">							非只读(安全 速度慢)(默认)</span><br><span class="line">								mybatis认为获取的数据可能会被修改</span><br><span class="line">								mybatis就会利用序列化反序列化技术克隆一份数据给用户</span><br><span class="line">					size:缓存存放多少元素</span><br><span class="line">					type:自定义缓存的全限定类名</span><br><span class="line">		   	3.由于默认的是非只读状态 所有pojo类要实现序列化接口</span><br><span class="line">		   	</span><br><span class="line">	和缓存有关的设置:</span><br><span class="line">		1.&lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;&gt;</span><br><span class="line">				如果设置为false的话 关闭的是二级缓存 一级缓存一直打开</span><br><span class="line">		2.每个&lt;select&gt;标签都有userCache=true</span><br><span class="line">						   false:不使用缓存(对一级缓存没有影响 关闭的是二级缓存)</span><br><span class="line">		3.每个增删改标签:flushCache=true</span><br><span class="line">					   增删改之后都会清除缓存(一级缓存 二级缓存都会被清空)</span><br><span class="line">					   查询标签flushCache=false</span><br><span class="line">					   如果改为true不会select查询之后会清空缓存</span><br><span class="line">		4.SqlSession.clearCache()会清空一级缓存跟二级缓存没有关系</span><br></pre></td></tr></table></figure>

<h3 id="缓存执行流程图"><a href="#缓存执行流程图" class="headerlink" title="缓存执行流程图"></a>缓存执行流程图</h3><p><img src="/img/MyBatis%E5%9B%9E%E9%A1%BE/cache.jpg" alt=""></p>
<h3 id="Spring和MyBatis整合XML"><a href="#Spring和MyBatis整合XML" class="headerlink" title="Spring和MyBatis整合XML"></a>Spring和MyBatis整合XML</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	加载x配置文件时需要classpth:xx/xxx</span></span><br><span class="line"><span class="comment">	加载文件夹或者java文件时候:com.xx.xx 直接写路径就可以</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:mybatis-spring</span>=<span class="string">"http://mybatis.org/schema/mybatis-spring"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://mybatis.org/schema/mybatis-spring http://mybatis.org/schema/mybatis-spring-1.2.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- Spring希望管理所有的业务逻辑组件，等。。。 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.xxx.p2p"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 引入数据库的配置文件 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:dbconfig.properties"</span> /&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- Spring用来控制业务逻辑。数据源、事务控制、aop --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- spring事务管理 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSourceTransactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 开启基于注解的事务 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">"dataSourceTransactionManager"</span>/&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">	整合mybatis </span></span><br><span class="line"><span class="comment">		目的：1、spring管理所有组件。mapper的实现类。</span></span><br><span class="line"><span class="comment">				service==&gt;Dao   @Autowired:自动注入mapper；</span></span><br><span class="line"><span class="comment">			2、spring用来管理事务，spring声明式事务</span></span><br><span class="line"><span class="comment">	--&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--创建出SqlSessionFactory对象  --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactoryBean"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- configLocation指定全局配置文件的位置 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span> <span class="attr">value</span>=<span class="string">"classpath:mybatis-config.xml"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--mapperLocations: 指定mapper文件的位置--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mapperLocations"</span> <span class="attr">value</span>=<span class="string">"classpath:mybatis/mapper/*.xml"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--别名--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"typeAliasesPackage"</span> <span class="attr">value</span>=<span class="string">"com.xxx.p2p.*.domain"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 扫描所有的mapper接口的实现，让这些mapper能够自动注入；</span></span><br><span class="line"><span class="comment">	base-package：指定mapper接口的包名</span></span><br><span class="line"><span class="comment">	 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mybatis-spring:scan</span> <span class="attr">base-package</span>=<span class="string">"com.atguigu.mybatis.dao"</span>/&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- &lt;bean class="org.mybatis.spring.mapper.MapperScannerConfigurer"&gt;</span></span><br><span class="line"><span class="comment">		&lt;property name="basePackage" value="com.atguigu.mybatis.dao"&gt;&lt;/property&gt;</span></span><br><span class="line"><span class="comment">	&lt;/bean&gt; --&gt;</span></span><br><span class="line">	</span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>


    </div>

    
    
    

      <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
                <a href="/2019/02/15/MySQL%E5%9B%9E%E9%A1%BE/" rel="next" title="MySQL">
                  <i class="fa fa-chevron-left"></i> MySQL
                </a>
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
                <a href="/2019/02/28/Spring-Data-JPA/" rel="prev" title="Spring Data JPA">
                  Spring Data JPA <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#MyBatis—-半自动化-轻量的持久层框架"><span class="nav-number">1.</span> <span class="nav-text">MyBatis—(半自动化  轻量的持久层框架)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MyBatis为什么要面向接口编程"><span class="nav-number">2.</span> <span class="nav-text">MyBatis为什么要面向接口编程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MyBatis传入的参数处理"><span class="nav-number">3.</span> <span class="nav-text">MyBatis传入的参数处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取参数细节"><span class="nav-number">4.</span> <span class="nav-text">获取参数细节</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#xxx-与-xxx-的区别"><span class="nav-number">5.</span> <span class="nav-text">#{xxx}与${xxx}的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MyBatis在做模糊查询的时候SQL语句"><span class="nav-number">6.</span> <span class="nav-text">MyBatis在做模糊查询的时候SQL语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#resultMap-自定义返回结果类型"><span class="nav-number">7.</span> <span class="nav-text">resultMap 自定义返回结果类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#resultMap分步查询"><span class="nav-number">8.</span> <span class="nav-text">resultMap分步查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Collection查询关联查询和分步查询"><span class="nav-number">9.</span> <span class="nav-text">Collection查询关联查询和分步查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#resultMap-collection-分步查询-延迟加载-需要传多个值怎么办"><span class="nav-number">10.</span> <span class="nav-text">resultMap   collection 分步查询(延迟加载)需要传多个值怎么办?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#如果在全局配置文件中开启了延迟加载-某条SQL需要立即加载怎么办"><span class="nav-number">11.</span> <span class="nav-text">如果在全局配置文件中开启了延迟加载  某条SQL需要立即加载怎么办</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MyBatis动态SQL"><span class="nav-number">12.</span> <span class="nav-text">MyBatis动态SQL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MyBatis的缓存机制"><span class="nav-number">13.</span> <span class="nav-text">MyBatis的缓存机制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#缓存执行流程图"><span class="nav-number">14.</span> <span class="nav-text">缓存执行流程图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring和MyBatis整合XML"><span class="nav-number">15.</span> <span class="nav-text">Spring和MyBatis整合XML</span></a></li></ol></div>

      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="site-author-image" itemprop="image" alt="4003"
    src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">4003</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">5</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        
        












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script>



  
















  

  

</body>
</html>
